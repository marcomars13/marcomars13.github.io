<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Fractus Demo â€” Powered by Fractys</title>
  <meta name="description" content="Scientific benchmark and fractal intelligence visualization â€” Fractus vs Plonk comparison.">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/demo.css">
</head>

<body class="fractus-access">
  <nav>
    <div class="brand">
      <img src="/logo.png" alt="Fractys logo"/>
      <span>Fractys (FTS)</span>
    </div>
    <div class="links">
      <a href="/index.html">Home</a>
      <a href="/fractus-access.html">Fractus Access</a>
      <a href="/airdrop.html">Airdrop</a>
      <a href="/fractus-demo.html" class="active">Demo</a>
    </div>
  </nav>

  <header class="demo-hero">
    <div class="hero-inner">
      <h1>ðŸ§  Fractus Scientific Demo</h1>
      <p class="subtitle">Benchmark Plonk vs Fractus â€” 5 000 Mapillary images (France)</p>
    </div>
  </header>

  <main class="demo-container">

    <!-- === BENCHMARK SECTION === -->
    <section class="lab-section">
      <h2 class="lab-title">Benchmark Plonk vs Fractus â€” 5 000 Mapillary Geotagged Images</h2>
      <div class="lab-grid">
        <div class="lab-card">
          <h4>Average Error (km)</h4>
          <canvas id="c_bench" class="lab-canvas"></canvas>
          <div class="lab-legend">
            <div>Plonk: <span class="val" id="lg_plonk">1252 km</span></div>
            <div>Fractus: <span class="val" id="lg_fractus">870 km</span></div>
            <div>Gain: <span class="val" id="lg_gain">âˆ’30.5 %</span></div>
          </div>
        </div>

        <div class="lab-card">
          <h4>Entropy & Coherence</h4>
          <canvas id="c_entropy" class="lab-canvas"></canvas>
          <div class="lab-legend">
            <div>Entropy: <span class="val" id="entropyVal">0.032</span></div>
            <div>Coherence: <span class="val" id="coherenceVal">98.4 %</span></div>
          </div>
        </div>

        <div class="lab-card">
          <h4>Fractal Stability â€” Std Dev (km)</h4>
          <canvas id="c_stability" class="lab-canvas"></canvas>
          <div class="lab-legend">
            <div>Plonk Ïƒ: <span class="val">92.7 km</span></div>
            <div>Fractus Ïƒ: <span class="val" id="stabilityVal">90.6 km</span></div>
          </div>
        </div>

        <div class="lab-card">
          <h4>Processing Efficiency</h4>
          <canvas id="c_eff" class="lab-canvas"></canvas>
          <div class="lab-legend">
            <div>Efficiency: <span class="val" id="efficiencyVal">Ã— 1.30</span></div>
            <div>Status: <span class="val">Stable</span></div>
          </div>
        </div>
      </div>

      <!-- === FRACTUS ENGINE VISUAL === -->
      <div class="fractus-visual">
        <h2>âš¡ Fractus Engine â€” Real-Time Stability Monitor</h2>
        <canvas id="fractusCanvas"></canvas>
        <div class="live-monitor">
          <div>ðŸŒ€ Entropy: <span id="m_entropy">0.032</span></div>
          <div>ðŸ”— Coherence: <span id="m_coherence">98.4 %</span></div>
          <div>âš¡ Efficiency: <span id="m_efficiency">Ã— 1.30</span></div>
          <div>ðŸ“ˆ Stability: <span id="m_stability">Ïƒ = 90.6 km</span></div>
        </div>
      </div>
    </section>

    <section class="lab-section">
      <h2 class="lab-title">Benchmark Logs â€” Anomaly Detection on 50 000 Entries</h2>
      <div class="lab-grid">
        <div class="lab-card"><h4>Detection Rate (%)</h4><canvas id="c_log_rate" class="lab-canvas"></canvas></div>
        <div class="lab-card"><h4>False Positive Rate (%)</h4><canvas id="c_log_fp" class="lab-canvas"></canvas></div>
        <div class="lab-card"><h4>Mean Detection Latency (ms)</h4><canvas id="c_log_latency" class="lab-canvas"></canvas></div>
        <div class="lab-card"><h4>Accuracy / Throughput</h4><canvas id="c_log_acc" class="lab-canvas"></canvas></div>
      </div>
    </section>
  </main>

  <footer>Â© 2025 Fractys â€” Created by Marc Cedrych â€” Built on Solana</footer>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
    const lerp=(a,b,t)=>a+(b-a)*t;

    function prepCanvas(c,w,h){
      const dpr=window.devicePixelRatio||1;
      const cssW=w??(c.clientWidth||300);
      const cssH=h??(c.clientHeight||150);
      c.width=Math.max(1,Math.floor(cssW*dpr));
      c.height=Math.max(1,Math.floor(cssH*dpr));
      const ctx=c.getContext("2d");
      ctx.setTransform(dpr,0,0,dpr,0,0);
      return{ctx,cssW,cssH};
    }

    /* === State === */
    const METRICS={entropy:0.032,coherence:98.4,efficiency:1.30,stability:90.6};
    const BENCH={plonk_km:1252,fractus_km:870};
    const SIGMA={plonk:92.7};
    let SERIES={entropy:[],coherence:[],efficiency:[],stability:[]},cursor=0;

    function writeMonitor(){
      m_entropy.textContent=METRICS.entropy.toFixed(3);
      m_coherence.textContent=`${METRICS.coherence.toFixed(1)} %`;
      m_efficiency.textContent=`Ã—${METRICS.efficiency.toFixed(2)}`;
      m_stability.textContent=`Ïƒ = ${METRICS.stability.toFixed(1)} km`;
    }
    function writeBenchLegend(){
      lg_plonk.textContent=`${BENCH.plonk_km.toFixed(0)} km`;
      lg_fractus.textContent=`${BENCH.fractus_km.toFixed(0)} km`;
      const gain=(BENCH.plonk_km-BENCH.fractus_km)/BENCH.plonk_km*100;
      lg_gain.textContent=`${gain<0?'âˆ’':''}${Math.abs(gain).toFixed(1)} %`;
      lg_gain.style.color=gain>0?'#7fffd4':'#ffe680';
    }

    /* === Animated bars === */
    function animatedBarLive({id,getA,getB,labelA,labelB,unit,colorA,colorB}){
      const c=document.getElementById(id); if(!c)return;
      let {ctx,cssW,cssH}=prepCanvas(c);
      const pad=12;
      window.addEventListener('resize',()=>({ctx,cssW,cssH}=prepCanvas(c)),{passive:true});
      const fmt=v=>{
        if(unit===' km')return`${v.toFixed(1)} km`;
        if(unit===' %')return`${v.toFixed(1)} %`;
        if(unit===' ms')return`${v.toFixed(1)} ms`;
        if(unit==='Ã—')return`Ã—${v.toFixed(2)}`;
        return`${v.toFixed(3)}`;
      };
      function draw(){
        const a=getA(),b=getB();const maxVal=Math.max(a,b)*1.15;
        ctx.clearRect(0,0,cssW,cssH);ctx.fillStyle='#0b0f10';ctx.fillRect(0,0,cssW,cssH);
        const wA=(a/maxVal)*(cssW-pad*2),wB=(b/maxVal)*(cssW-pad*2);
        ctx.fillStyle=colorB;ctx.fillRect(pad,cssH*0.62,wB,20);
        ctx.fillStyle=colorA;ctx.fillRect(pad,cssH*0.62-30,wA,20);
        ctx.fillStyle='#9adfce';ctx.font='12px ui-sans-serif';
        ctx.fillText(`${labelA}: ${fmt(a)}`,pad,cssH*0.62-12);
        ctx.fillText(`${labelB}: ${fmt(b)}`,pad,cssH*0.62+35);
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    }

    /* === Fractal wheel === */
    const canvas=document.getElementById("fractusCanvas");
    let ctxF=null,wF=0,hF=0;
    function initFractal(){
      const res=prepCanvas(canvas,Math.min(window.innerWidth*0.9,720),400);
      ctxF=res.ctx;wF=res.cssW;hF=res.cssH;
    }
    window.addEventListener("resize",initFractal);
    initFractal();
    function drawFractal(){
      if(!ctxF){requestAnimationFrame(drawFractal);return;}
      ctxF.clearRect(0,0,wF,hF);
      const eNorm=clamp((METRICS.entropy-0.028)/(0.045-0.028),0,1);
      const radius=50+Math.sin(performance.now()*0.003)*(8*eNorm+2);
      const grad=ctxF.createRadialGradient(wF/2,hF/2,0,wF/2,hF/2,radius+80);
      grad.addColorStop(0,`rgba(127,255,212,${0.10+0.15*eNorm})`);
      grad.addColorStop(1,"rgba(0,0,0,0)");
      ctxF.fillStyle=grad;ctxF.beginPath();
      ctxF.arc(wF/2,hF/2,radius+80,0,Math.PI*2);ctxF.fill();
      const rings=9,baseR=40,stepR=35,N=12;
      for(let i=0;i<rings;i++){
        const r=baseR+i*stepR+Math.sin(performance.now()*0.002+i)*2;
        ctxF.beginPath();
        ctxF.strokeStyle=`hsl(${(i*28+performance.now()*0.02)%360},80%,70%)`;
        ctxF.lineWidth=1.1;
        ctxF.arc(wF/2,hF/2,r,0,Math.PI*2);ctxF.stroke();
      }
      const speed=lerp(0.6,1.4,eNorm);
      for(let i=0;i<N;i++){
        const a=performance.now()*0.001*speed+i*0.52;
        const r=baseR+(i%(rings-2))*stepR;
        const x=wF/2+Math.cos(a)*r,y=hF/2+Math.sin(a)*r;
        ctxF.beginPath();
        ctxF.fillStyle=i%3===0?'#7fffd4':(i%3===1?'#80c0ff':'#ffe680');
        ctxF.arc(x,y,3,0,Math.PI*2);ctxF.fill();
      }
      requestAnimationFrame(drawFractal);
    }
    requestAnimationFrame(drawFractal);

    /* === Bars === */
    animatedBarLive({
      id:'c_bench',labelA:'Fractus',labelB:'Plonk',unit:' km',
      colorA:'rgba(127,255,212,.9)',colorB:'rgba(255,80,80,.9)',
      getA:()=>BENCH.fractus_km,getB:()=>BENCH.plonk_km});
    animatedBarLive({
      id:'c_entropy',labelA:'Entropy',labelB:'Coherence',unit:'',
      colorA:'rgba(127,255,212,.9)',colorB:'rgba(127,200,255,.9)',
      getA:()=>METRICS.entropy,getB:()=>METRICS.coherence});
    animatedBarLive({
      id:'c_stability',labelA:'Fractus Ïƒ',labelB:'Plonk Ïƒ',unit:' km',
      colorA:'rgba(127,255,212,.9)',colorB:'rgba(255,80,80,.9)',
      getA:()=>METRICS.stability,getB:()=>SIGMA.plonk});
    animatedBarLive({
      id:'c_eff',labelA:'Fractus',labelB:'Baseline',unit:'Ã—',
      colorA:'rgba(127,255,212,.9)',colorB:'rgba(255,80,80,.9)',
      getA:()=>METRICS.efficiency,getB:()=>1.00});

    writeBenchLegend();
    writeMonitor();
  });
  </script>
</body>
</html>


